"0","#| message: false"
"0",""
"0","# Calculate mean distance to 3 nearest streetlights that are out"
"0",""
"0","# Get coordinates"
"0","fishnet_coords <- st_coordinates(st_centroid(fishnet))"
"2","Warning:"
"2"," st_centroid assumes attributes are constant over geometries
"
"0","streetlight_coords <- st_coordinates(street_lights)"
"0",""
"0","# Calculate k nearest neighbors and distances"
"0","nn_result <- get.knnx(streetlight_coords, fishnet_coords, k = 3)"
"0",""
"0","# Add to fishnet"
"0","fishnet <- fishnet %>%"
"0","  mutate("
"0","    street_lights.nn = rowMeans(nn_result$nn.dist)"
"0","  )"
"0",""
"0","cat(""✓ Calculated nearest neighbor distances\n"")"
"1","✓ Calculated nearest neighbor distances
"
"0","summary(fishnet$street_lights.nn)"
"1","    Min. "
"1"," 1st Qu. "
"1","  Median "
"1","    Mean "
"1"," 3rd Qu. "
"1","    Max. "
"1","
"
"1","   4.494 "
"1","  61.697 "
"1","  98.685 "
"1"," 172.645 "
"1"," 174.718 "
"1","1646.965 "
"1","
"
