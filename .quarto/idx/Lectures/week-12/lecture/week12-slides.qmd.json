{"title":"Mapping the DNA of Urban Neighborhoods","markdown":{"yaml":{"title":"Mapping the DNA of Urban Neighborhoods","subtitle":"Sequential Analysis of Neighborhood Change","author":"The very famous Dr. Elizabeth Delmelle","format":{"revealjs":{"theme":"simple","chalkboard":true,"slide-number":true,"preview-links":"auto","code-line-numbers":false,"code-overflow":"wrap"}}},"headingText":"The Problem with Snapshots","containsRefs":false,"markdown":"\n\n\n\nTraditional neighborhood analysis:\n\n\n![](images/buffalo.png)\n\n## What's missing?\n\nThe full longitudinal **sequence** of change\n\n. . .\n\n**Example:** Did a neighborhood that's \"gentrifying\" in 2010:\n\n- Steadily improve from 1970?\n- Decline, then recover?\n- Cycle through ups and downs?\n\n---\n\n## Why Sequences Matter for Policy\n\n:::: {.columns}\n::: {.column width=\"50%\"}\n### Neighborhood A\n`Stable → Declining → Struggling → Gentrifying`\n\n**Intervention:** Anti-displacement support, affordable housing preservation\n:::\n\n::: {.column width=\"50%\"}\n### Neighborhood B\n`Struggling → Struggling → Struggling → Gentrifying`\n\n**Intervention:** Infrastructure investment, longtime resident wealth-building\n:::\n::::\n\n. . .\n\n**Same 2010 snapshot, completely different histories = different policy needs**\n\n---\n\n## The DNA Metaphor\n\nJust like DNA sequences tell us about biological inheritance...\n\n. . .\n\n**Neighborhood sequences tell us about:**\n\n::: {.incremental}\n- Patterns of change across metro areas\n- Where different processes (decline, gentrification) occur spatially\n- Racial and ethnic dynamics tied to socioeconomic change\n- Which neighborhoods are \"stuck\" vs. volatile\n- Whether Chicago School theories still apply\n:::\n\n---\n\n## What We'll Learn Today\n\nA method to:\n\n1. Classify neighborhoods at multiple time points\n2. Create sequences for each neighborhood\n3. Measure similarity between sequences\n4. Cluster similar trajectories\n5. **Map** the results to see spatial patterns\n\n. . .\n\n**The goal:** Understanding neighborhood change as a **process**, not just snapshots\n\n---\n\n# Research Context {background-color=\"#003366\"}\n\n---\n\n## Classic Urban Theories\n\n:::: {.columns}\n::: {.column width=\"50%\"}\n### Chicago School (1920s-1960s)\n\n- **Burgess:** Concentric zones\n- **Hoyt:** Sector model  \n- **Harris & Ullman:** Multiple nuclei\n- **Hoover & Vernon:** Life cycle model\n\n**Predicted:** Regular spatial patterns of neighborhood decline/renewal\n:::\n\n::: {.column width=\"50%\"}\n### Los Angeles School (1990s-2000s)\n\n- **Dear, Soja:** Postmodern fragmentation\n- No regular patterns\n- Core doesn't determine periphery\n\n**Predicted:** Chaotic, unpredictable patterns\n:::\n::::\n\n---\n\n## What Does the Data Show?\n\n\n![From **Delmelle (2016)** ](images/ChicagoLA.png)\n---\n\n## Chicago: The Rings Persist\n\n![Chicago neighborhood trajectories, 1970-2010](images/chicago.png)\n\n---\n\n## Los Angeles: A Different Story\n\n![Los Angeles neighborhood trajectories, 1970-2010](images/LA.png){width=80%}\n\n::: {.notes}\n- No clear rings\n- Suburban upgrading, not downtown revival\n- More spatial fragmentation\n- Different racial dynamics\n- Supports LA School arguments\n:::\n\n---\n\n## Neighborhood Pathways Observed\n\n**Upgrading paths:**\n\n- Struggling → Young urban (gentrification in diverse areas)\n- Blue collar → Young urban (densification)\n- Suburban → Elite suburban (suburban improvement)\n\n. . .\n\n**Declining paths:**\n\n- Suburban → Blue collar (ring of suburban decline)\n- Blue collar → Struggling (continued decline)\n- **Most common:** No change (stability at extremes)\n\n\n---\n\n# The Methodological Workflow {background-color=\"#003366\"}\n\n---\n\n## Overview: 5 Main Steps\n\n![Methodological Workflow](images/workflow.png)\n\n---\n\n# Step 1: K-means Clustering {background-color=\"#003366\"}\n\n---\n\n## What is K-means Clustering?\n\n**K-means** is an **unsupervised** machine learning algorithm that:\n\n::: {.incremental}\n- Groups observations into **k** clusters based on similarity\n- Assigns each observation to the cluster with the nearest **mean (centroid)**\n- Iteratively updates cluster assignments and centroids until convergence\n:::\n\n. . .\n\n**Why unsupervised?** We don't tell the algorithm what makes a \"gentrifying\" vs. \"declining\" neighborhood - it discovers patterns in the data\n\n---\n\n## How K-means Works\n\n**The Algorithm:**\n\n1. **Initialize:** Randomly place k centroids in the data space\n2. **Assign:** Each neighborhood → nearest centroid (Euclidean distance)\n3. **Update:** Recalculate centroid positions (mean of assigned points)\n4. **Repeat:** Until assignments stop changing (convergence)\n\n. . .\n\n**Key feature:** Partitions data into **k** non-overlapping groups\n\n---\n\n## K-means for Neighborhoods\n\n**Input:** Variables describing neighborhoods (all years combined)\n\n- **Socioeconomic:** % college degree, unemployment, poverty\n- **Housing:** Home value, owner-occupied, multi-unit structures, age\n- **Demographic:** Recent movers, vacancy, seniors, children\n\n. . .\n\n**Why standardize (z-score)?** Compare relative position within metro over time\n\n. . .\n\n**Key decision:** Cluster **all years together** → ensures temporal consistency\n\n---\n\n## The Art of Choosing K\n\n**Mathematical optimum ≠ Substantive optimum**\n\nFrom the tutorial: NYC analysis found optimal k=3, but used k=6\n\n**Why?**\n\n::: {.incremental}\n- k=3 groups: mostly White, mostly Black, mostly Hispanic\n- k=6 provides **nuance**: mixed-race categories, diversity gradations\n- More clusters = richer understanding of change pathways\n- \"More art than precise science\" – from the tutorial\n:::\n\n---\n\n## Evaluating Different K Values\n\n**Common metrics:**\n\n- **Within-cluster sum of squares (WSS):** Lower is better, always decreases\n- **Silhouette width:** How well observations fit their cluster (0-1)\n- **Elbow method:** Look for the \"bend\" in WSS plot\n\n. . .\n\n**Tutorial approach:** Test k=2 through k=10, examine fit AND interpretability\n\n. . .\n\n**But ultimately:** Choose k that makes **theoretical sense** and tells meaningful story\n\n---\n\n## Example: Testing Multiple K Values\n\n*Where does adding more clusters stop improving fit dramatically?*\n\n![](images/wss.png)\n\n\n## Silhouette Plots\n\n![Examining Average Silhouette Values](images/silhoutette.png)\n\n---\n\n\n## Interpreting Cluster Results\n\n![Characteristics of 3 different clustering solutions](images/clusters.png)\n\n\n---\n\n# Step 2: Create Sequences {background-color=\"#003366\"}\n\n---\n\n## From Clusters to Sequences\n\nOnce each neighborhood is classified at each time point:\n\n**Before:** Each tract has 5 separate cluster assignments\n\n```\nTract 123:  1980=1, 1990=1, 2000=3, 2010=3, 2020=3\n```\n\n. . .\n\n**After:** Each tract has one **sequence** describing its trajectory\n\n```\nTract 123:  White → White → Hispanic → Hispanic → Hispanic\n```\n\n. . .\n\n**Result:** Each neighborhood has a \"signature\" of change over time\n\n---\n\n## Creating the Sequence Object\n\n```{r}\n#| eval: false\n#| echo: true\n#| code-line-numbers: \"|1-4|6-11\"\n\n# Reshape to wide format (one row per tract)\ncensus_wide <- census_data %>%\n  select(tract, year, cluster) %>%\n  pivot_wider(names_from = year, values_from = cluster)\n\n# Define sequence object with TraMineR\nseq_data <- seqdef(\n  census_wide,\n  var = c(\"1980\", \"1990\", \"2000\", \"2010\", \"2020\"),\n  labels = c(\"White\", \"Black\", \"Hispanic\", \"Asian\", \n             \"Black/Hisp\", \"White Mixed\")\n)\n```\n\n---\n\n## Visualizing All Sequences\n\nBefore clustering, visualize them:\n\n![All the sequences](images/all_sequences.png)\n\n\n---\n\n# Step 3: Measure Sequence Dissimilarity {background-color=\"#003366\"}\n\n**The Challenge:** How do we measure similarity between sequences?\n\n---\n\n## Why Sequence Similarity Matters\n\nConsider these three neighborhoods:\n\n```\nNeighborhood A: White → White → Hispanic → Hispanic → Hispanic\nNeighborhood B: White → Hispanic → Hispanic → Hispanic → Hispanic  \nNeighborhood C: Black → Black → Black → Black → Hispanic\n```\n\n. . .\n\n**Question:** Which two are most similar?\n\n- A and B? (both go White → Hispanic)\n- A and C? (both end Hispanic)\n- B and C? (both have one transition)\n\n. . .\n\n**Answer depends on:** Do we care more about **timing**, **endpoints**, or **sequence order**?\n\n---\n\n## Optimal Matching (OM) Algorithm\n\n**Classic approach** - borrowed from DNA sequence analysis:\n\n- Counts minimum \"edits\" to transform one sequence into another\n- **Operations:** Insert, Delete, Substitute\n- **Costs:** Based on how difficult/rare each transformation is\n\n. . .\n\n**Problem:** Traditional OM doesn't emphasize **ordering** of transitions\n\n---\n\n## OMstrans: Sequence-Aware Matching\n\n**From the tutorial:** Use **OMstrans** (Optimal Matching of transitions)\n\n::: {.incremental}\n- Focuses on the **sequences of transitions**, not just states\n- Joins each state with its previous state (AB, BC, CD instead of A, B, C, D)\n- Better captures the **process** of change\n- More sensitive to the **order** in which transitions occur\n:::\n\n. . .\n\n**Key difference:** \"White→Hispanic→Asian\" ≠ \"White→Asian→Hispanic\"\n\n---\n\n## OMstrans Example\n\n**Standard OM sees:**\n```\nSequence A: White, White, Hispanic, Hispanic, Hispanic\nSequence B: White, Hispanic, Hispanic, Hispanic, Hispanic\n```\n\n. . .\n\n**OMstrans sees:**\n```\nSequence A: White→White, White→Hispanic, Hispanic→Hispanic, Hispanic→Hispanic\nSequence B: White→Hispanic, Hispanic→Hispanic, Hispanic→Hispanic, Hispanic→Hispanic\n```\n\n. . .\n\n**Why this matters:** Captures **when** the transition happened (early vs. late)\n\n---\n\n## Computing OMstrans Dissimilarity\n\n```{r}\n#| eval: false\n#| echo: true\n#| code-line-numbers: \"|1-3|5-11\"\n\n# Calculate transition-based substitution costs\nsubmat <- seqsubm(seq_data, method = \"TRATE\", \n                  transition = \"both\")\n\n# Compute OMstrans dissimilarity\ndist_omstrans <- seqdist(\n  seq_data,\n  method = \"OMstrans\",  # Note: OMstrans, not OM\n  indel = 1,            # insertion/deletion cost\n  sm = submat,          # substitution cost matrix\n  otto = 0.1            # origin-transition tradeoff\n)\n```\n\n**Key parameter:** `otto` (origin-transition tradeoff) - lower values emphasize sequencing\n\n---\n\n\n## Understanding the Parameters\n\n**`indel = 1`:** Cost for insertion/deletion operations\n\n- Higher values = less time-warping allowed\n- Tutorial uses 1 (half of max substitution cost)\n\n. . .\n\n**`otto = 0.1`:** Origin-transition tradeoff parameter\n\n- Lower values = emphasize **sequencing** of transitions\n- Tutorial uses 0.1 to prioritize order of change\n\n. . .\n\n**`norm = TRUE`:** Normalize distances by sequence length\n\n- Ensures fair comparison across different-length sequences\n\n---\n\n## Understanding the Cost Matrix\n\n**Substitution costs based on transition frequencies:**\n\n- **Rare transitions** = HIGH cost (e.g., Hispanic → Asian)\n- **Common transitions** = LOW cost (e.g., White → White Mixed)\n\n![Inverse Transition Matrix for Costs](images/trate.png)\n\n**Intuition:** Neighborhoods following rare pathways are dissimilar\n\n---\n\n## The Dissimilarity Matrix\n\n**Output:** Matrix of pairwise distances between all sequences\n\n```\n         Tract1  Tract2  Tract3  ...\nTract1     0      2.4     5.1   ...\nTract2    2.4      0      4.8   ...\nTract3    5.1     4.8      0    ...\n```\n\n**Interpretation:** Lower numbers = more similar trajectories\n\n. . .\n\n**Next step:** Use this matrix to cluster similar sequences\n\n---\n\n# Step 4: Cluster Similar Sequences {background-color=\"#003366\"}\n\n---\n\n## From Distances to Clusters\n\n**We now have:** Dissimilarity matrix (every sequence compared to every other)\n\n**We want:** Groups of neighborhoods following similar trajectories\n\n. . .\n\n**Solution:** Hierarchical clustering using Ward's method\n\n---\n\n## Hierarchical Clustering Overview\n\n**How it works:**\n\n1. Start with each sequence as its own cluster (n clusters)\n2. Find the two most similar clusters\n3. Merge them\n4. Repeat until all sequences are in one cluster\n5. **Cut** the dendrogram at desired number of clusters\n\n. . .\n\n**Ward's method:** Minimizes within-cluster variance at each merge\n\n---\n\n## Applying Hierarchical Clustering\n\n![Hierarchical Clustering Example](images/hierarchical.png)\n\n---\n\n## Choosing Number of Trajectory Clusters\n\n**Unlike k-means, no clear mathematical optimum**\n\nFrom tutorial approach:\n\n::: {.incremental}\n- Start with many clusters (e.g., 20-30)\n- Examine sequence plots for each\n- **Merge clusters** if they show similar patterns\n- **Stop merging** when you'd group opposite trajectories together\n:::\n\n. . .\n\n**Example:** Don't merge \"increasing White\" with \"increasing Hispanic\"\n\n---\n\n## The 14 NYC Trajectory Clusters\n\nFrom the tutorial (1980-2020):\n\n| Cluster | Description | n |\n|---------|-------------|---|\n| 1 | Hispanic → Black & Hispanic | 102 |\n| 2 | Stable (all types) | 537 |\n| 3 | White → Hispanic | 243 |\n| 4 | Hispanic → Asian | 60 |\n| 5 | Black → White Mixed | 91 |\n| ... | ... | ... |\n\n**Most common:** Stability (no change)\n\n---\n\n## Visualizing Trajectory Clusters\n\n**Sequence frequency plots** show the diversity within each cluster:\n\n![](images/seq_plot.png)\n\n**Width of bars** = frequency of that specific sequence\n\n---\n\n## Step 5: Map Results\n\n\n![](images/map.png)\n\n\n---\n\n# Code Walkthrough {background-color=\"#003366\"}\n\nLet's see how this works in R: download the tutorial\n\nhttps://github.com/ericdelmelle/sequencePaper\n\n---\n\n","srcMarkdownNoYaml":"\n\n\n## The Problem with Snapshots\n\nTraditional neighborhood analysis:\n\n\n![](images/buffalo.png)\n\n## What's missing?\n\nThe full longitudinal **sequence** of change\n\n. . .\n\n**Example:** Did a neighborhood that's \"gentrifying\" in 2010:\n\n- Steadily improve from 1970?\n- Decline, then recover?\n- Cycle through ups and downs?\n\n---\n\n## Why Sequences Matter for Policy\n\n:::: {.columns}\n::: {.column width=\"50%\"}\n### Neighborhood A\n`Stable → Declining → Struggling → Gentrifying`\n\n**Intervention:** Anti-displacement support, affordable housing preservation\n:::\n\n::: {.column width=\"50%\"}\n### Neighborhood B\n`Struggling → Struggling → Struggling → Gentrifying`\n\n**Intervention:** Infrastructure investment, longtime resident wealth-building\n:::\n::::\n\n. . .\n\n**Same 2010 snapshot, completely different histories = different policy needs**\n\n---\n\n## The DNA Metaphor\n\nJust like DNA sequences tell us about biological inheritance...\n\n. . .\n\n**Neighborhood sequences tell us about:**\n\n::: {.incremental}\n- Patterns of change across metro areas\n- Where different processes (decline, gentrification) occur spatially\n- Racial and ethnic dynamics tied to socioeconomic change\n- Which neighborhoods are \"stuck\" vs. volatile\n- Whether Chicago School theories still apply\n:::\n\n---\n\n## What We'll Learn Today\n\nA method to:\n\n1. Classify neighborhoods at multiple time points\n2. Create sequences for each neighborhood\n3. Measure similarity between sequences\n4. Cluster similar trajectories\n5. **Map** the results to see spatial patterns\n\n. . .\n\n**The goal:** Understanding neighborhood change as a **process**, not just snapshots\n\n---\n\n# Research Context {background-color=\"#003366\"}\n\n---\n\n## Classic Urban Theories\n\n:::: {.columns}\n::: {.column width=\"50%\"}\n### Chicago School (1920s-1960s)\n\n- **Burgess:** Concentric zones\n- **Hoyt:** Sector model  \n- **Harris & Ullman:** Multiple nuclei\n- **Hoover & Vernon:** Life cycle model\n\n**Predicted:** Regular spatial patterns of neighborhood decline/renewal\n:::\n\n::: {.column width=\"50%\"}\n### Los Angeles School (1990s-2000s)\n\n- **Dear, Soja:** Postmodern fragmentation\n- No regular patterns\n- Core doesn't determine periphery\n\n**Predicted:** Chaotic, unpredictable patterns\n:::\n::::\n\n---\n\n## What Does the Data Show?\n\n\n![From **Delmelle (2016)** ](images/ChicagoLA.png)\n---\n\n## Chicago: The Rings Persist\n\n![Chicago neighborhood trajectories, 1970-2010](images/chicago.png)\n\n---\n\n## Los Angeles: A Different Story\n\n![Los Angeles neighborhood trajectories, 1970-2010](images/LA.png){width=80%}\n\n::: {.notes}\n- No clear rings\n- Suburban upgrading, not downtown revival\n- More spatial fragmentation\n- Different racial dynamics\n- Supports LA School arguments\n:::\n\n---\n\n## Neighborhood Pathways Observed\n\n**Upgrading paths:**\n\n- Struggling → Young urban (gentrification in diverse areas)\n- Blue collar → Young urban (densification)\n- Suburban → Elite suburban (suburban improvement)\n\n. . .\n\n**Declining paths:**\n\n- Suburban → Blue collar (ring of suburban decline)\n- Blue collar → Struggling (continued decline)\n- **Most common:** No change (stability at extremes)\n\n\n---\n\n# The Methodological Workflow {background-color=\"#003366\"}\n\n---\n\n## Overview: 5 Main Steps\n\n![Methodological Workflow](images/workflow.png)\n\n---\n\n# Step 1: K-means Clustering {background-color=\"#003366\"}\n\n---\n\n## What is K-means Clustering?\n\n**K-means** is an **unsupervised** machine learning algorithm that:\n\n::: {.incremental}\n- Groups observations into **k** clusters based on similarity\n- Assigns each observation to the cluster with the nearest **mean (centroid)**\n- Iteratively updates cluster assignments and centroids until convergence\n:::\n\n. . .\n\n**Why unsupervised?** We don't tell the algorithm what makes a \"gentrifying\" vs. \"declining\" neighborhood - it discovers patterns in the data\n\n---\n\n## How K-means Works\n\n**The Algorithm:**\n\n1. **Initialize:** Randomly place k centroids in the data space\n2. **Assign:** Each neighborhood → nearest centroid (Euclidean distance)\n3. **Update:** Recalculate centroid positions (mean of assigned points)\n4. **Repeat:** Until assignments stop changing (convergence)\n\n. . .\n\n**Key feature:** Partitions data into **k** non-overlapping groups\n\n---\n\n## K-means for Neighborhoods\n\n**Input:** Variables describing neighborhoods (all years combined)\n\n- **Socioeconomic:** % college degree, unemployment, poverty\n- **Housing:** Home value, owner-occupied, multi-unit structures, age\n- **Demographic:** Recent movers, vacancy, seniors, children\n\n. . .\n\n**Why standardize (z-score)?** Compare relative position within metro over time\n\n. . .\n\n**Key decision:** Cluster **all years together** → ensures temporal consistency\n\n---\n\n## The Art of Choosing K\n\n**Mathematical optimum ≠ Substantive optimum**\n\nFrom the tutorial: NYC analysis found optimal k=3, but used k=6\n\n**Why?**\n\n::: {.incremental}\n- k=3 groups: mostly White, mostly Black, mostly Hispanic\n- k=6 provides **nuance**: mixed-race categories, diversity gradations\n- More clusters = richer understanding of change pathways\n- \"More art than precise science\" – from the tutorial\n:::\n\n---\n\n## Evaluating Different K Values\n\n**Common metrics:**\n\n- **Within-cluster sum of squares (WSS):** Lower is better, always decreases\n- **Silhouette width:** How well observations fit their cluster (0-1)\n- **Elbow method:** Look for the \"bend\" in WSS plot\n\n. . .\n\n**Tutorial approach:** Test k=2 through k=10, examine fit AND interpretability\n\n. . .\n\n**But ultimately:** Choose k that makes **theoretical sense** and tells meaningful story\n\n---\n\n## Example: Testing Multiple K Values\n\n*Where does adding more clusters stop improving fit dramatically?*\n\n![](images/wss.png)\n\n\n## Silhouette Plots\n\n![Examining Average Silhouette Values](images/silhoutette.png)\n\n---\n\n\n## Interpreting Cluster Results\n\n![Characteristics of 3 different clustering solutions](images/clusters.png)\n\n\n---\n\n# Step 2: Create Sequences {background-color=\"#003366\"}\n\n---\n\n## From Clusters to Sequences\n\nOnce each neighborhood is classified at each time point:\n\n**Before:** Each tract has 5 separate cluster assignments\n\n```\nTract 123:  1980=1, 1990=1, 2000=3, 2010=3, 2020=3\n```\n\n. . .\n\n**After:** Each tract has one **sequence** describing its trajectory\n\n```\nTract 123:  White → White → Hispanic → Hispanic → Hispanic\n```\n\n. . .\n\n**Result:** Each neighborhood has a \"signature\" of change over time\n\n---\n\n## Creating the Sequence Object\n\n```{r}\n#| eval: false\n#| echo: true\n#| code-line-numbers: \"|1-4|6-11\"\n\n# Reshape to wide format (one row per tract)\ncensus_wide <- census_data %>%\n  select(tract, year, cluster) %>%\n  pivot_wider(names_from = year, values_from = cluster)\n\n# Define sequence object with TraMineR\nseq_data <- seqdef(\n  census_wide,\n  var = c(\"1980\", \"1990\", \"2000\", \"2010\", \"2020\"),\n  labels = c(\"White\", \"Black\", \"Hispanic\", \"Asian\", \n             \"Black/Hisp\", \"White Mixed\")\n)\n```\n\n---\n\n## Visualizing All Sequences\n\nBefore clustering, visualize them:\n\n![All the sequences](images/all_sequences.png)\n\n\n---\n\n# Step 3: Measure Sequence Dissimilarity {background-color=\"#003366\"}\n\n**The Challenge:** How do we measure similarity between sequences?\n\n---\n\n## Why Sequence Similarity Matters\n\nConsider these three neighborhoods:\n\n```\nNeighborhood A: White → White → Hispanic → Hispanic → Hispanic\nNeighborhood B: White → Hispanic → Hispanic → Hispanic → Hispanic  \nNeighborhood C: Black → Black → Black → Black → Hispanic\n```\n\n. . .\n\n**Question:** Which two are most similar?\n\n- A and B? (both go White → Hispanic)\n- A and C? (both end Hispanic)\n- B and C? (both have one transition)\n\n. . .\n\n**Answer depends on:** Do we care more about **timing**, **endpoints**, or **sequence order**?\n\n---\n\n## Optimal Matching (OM) Algorithm\n\n**Classic approach** - borrowed from DNA sequence analysis:\n\n- Counts minimum \"edits\" to transform one sequence into another\n- **Operations:** Insert, Delete, Substitute\n- **Costs:** Based on how difficult/rare each transformation is\n\n. . .\n\n**Problem:** Traditional OM doesn't emphasize **ordering** of transitions\n\n---\n\n## OMstrans: Sequence-Aware Matching\n\n**From the tutorial:** Use **OMstrans** (Optimal Matching of transitions)\n\n::: {.incremental}\n- Focuses on the **sequences of transitions**, not just states\n- Joins each state with its previous state (AB, BC, CD instead of A, B, C, D)\n- Better captures the **process** of change\n- More sensitive to the **order** in which transitions occur\n:::\n\n. . .\n\n**Key difference:** \"White→Hispanic→Asian\" ≠ \"White→Asian→Hispanic\"\n\n---\n\n## OMstrans Example\n\n**Standard OM sees:**\n```\nSequence A: White, White, Hispanic, Hispanic, Hispanic\nSequence B: White, Hispanic, Hispanic, Hispanic, Hispanic\n```\n\n. . .\n\n**OMstrans sees:**\n```\nSequence A: White→White, White→Hispanic, Hispanic→Hispanic, Hispanic→Hispanic\nSequence B: White→Hispanic, Hispanic→Hispanic, Hispanic→Hispanic, Hispanic→Hispanic\n```\n\n. . .\n\n**Why this matters:** Captures **when** the transition happened (early vs. late)\n\n---\n\n## Computing OMstrans Dissimilarity\n\n```{r}\n#| eval: false\n#| echo: true\n#| code-line-numbers: \"|1-3|5-11\"\n\n# Calculate transition-based substitution costs\nsubmat <- seqsubm(seq_data, method = \"TRATE\", \n                  transition = \"both\")\n\n# Compute OMstrans dissimilarity\ndist_omstrans <- seqdist(\n  seq_data,\n  method = \"OMstrans\",  # Note: OMstrans, not OM\n  indel = 1,            # insertion/deletion cost\n  sm = submat,          # substitution cost matrix\n  otto = 0.1            # origin-transition tradeoff\n)\n```\n\n**Key parameter:** `otto` (origin-transition tradeoff) - lower values emphasize sequencing\n\n---\n\n\n## Understanding the Parameters\n\n**`indel = 1`:** Cost for insertion/deletion operations\n\n- Higher values = less time-warping allowed\n- Tutorial uses 1 (half of max substitution cost)\n\n. . .\n\n**`otto = 0.1`:** Origin-transition tradeoff parameter\n\n- Lower values = emphasize **sequencing** of transitions\n- Tutorial uses 0.1 to prioritize order of change\n\n. . .\n\n**`norm = TRUE`:** Normalize distances by sequence length\n\n- Ensures fair comparison across different-length sequences\n\n---\n\n## Understanding the Cost Matrix\n\n**Substitution costs based on transition frequencies:**\n\n- **Rare transitions** = HIGH cost (e.g., Hispanic → Asian)\n- **Common transitions** = LOW cost (e.g., White → White Mixed)\n\n![Inverse Transition Matrix for Costs](images/trate.png)\n\n**Intuition:** Neighborhoods following rare pathways are dissimilar\n\n---\n\n## The Dissimilarity Matrix\n\n**Output:** Matrix of pairwise distances between all sequences\n\n```\n         Tract1  Tract2  Tract3  ...\nTract1     0      2.4     5.1   ...\nTract2    2.4      0      4.8   ...\nTract3    5.1     4.8      0    ...\n```\n\n**Interpretation:** Lower numbers = more similar trajectories\n\n. . .\n\n**Next step:** Use this matrix to cluster similar sequences\n\n---\n\n# Step 4: Cluster Similar Sequences {background-color=\"#003366\"}\n\n---\n\n## From Distances to Clusters\n\n**We now have:** Dissimilarity matrix (every sequence compared to every other)\n\n**We want:** Groups of neighborhoods following similar trajectories\n\n. . .\n\n**Solution:** Hierarchical clustering using Ward's method\n\n---\n\n## Hierarchical Clustering Overview\n\n**How it works:**\n\n1. Start with each sequence as its own cluster (n clusters)\n2. Find the two most similar clusters\n3. Merge them\n4. Repeat until all sequences are in one cluster\n5. **Cut** the dendrogram at desired number of clusters\n\n. . .\n\n**Ward's method:** Minimizes within-cluster variance at each merge\n\n---\n\n## Applying Hierarchical Clustering\n\n![Hierarchical Clustering Example](images/hierarchical.png)\n\n---\n\n## Choosing Number of Trajectory Clusters\n\n**Unlike k-means, no clear mathematical optimum**\n\nFrom tutorial approach:\n\n::: {.incremental}\n- Start with many clusters (e.g., 20-30)\n- Examine sequence plots for each\n- **Merge clusters** if they show similar patterns\n- **Stop merging** when you'd group opposite trajectories together\n:::\n\n. . .\n\n**Example:** Don't merge \"increasing White\" with \"increasing Hispanic\"\n\n---\n\n## The 14 NYC Trajectory Clusters\n\nFrom the tutorial (1980-2020):\n\n| Cluster | Description | n |\n|---------|-------------|---|\n| 1 | Hispanic → Black & Hispanic | 102 |\n| 2 | Stable (all types) | 537 |\n| 3 | White → Hispanic | 243 |\n| 4 | Hispanic → Asian | 60 |\n| 5 | Black → White Mixed | 91 |\n| ... | ... | ... |\n\n**Most common:** Stability (no change)\n\n---\n\n## Visualizing Trajectory Clusters\n\n**Sequence frequency plots** show the diversity within each cluster:\n\n![](images/seq_plot.png)\n\n**Width of bars** = frequency of that specific sequence\n\n---\n\n## Step 5: Map Results\n\n\n![](images/map.png)\n\n\n---\n\n# Code Walkthrough {background-color=\"#003366\"}\n\nLet's see how this works in R: download the tutorial\n\nhttps://github.com/ericdelmelle/sequencePaper\n\n---\n\n"},"formats":{"revealjs":{"identifier":{"display-name":"RevealJS","target-format":"revealjs","base-format":"revealjs"},"execute":{"fig-width":10,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","html-math-method":{"method":"mathjax","url":"https://cdn.jsdelivr.net/npm/mathjax@2.7.9/MathJax.js?config=TeX-AMS_HTML-full"},"slide-level":2,"to":"revealjs","output-file":"week12-slides.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":false,"quarto-version":"1.8.24","auto-stretch":true,"title":"Mapping the DNA of Urban Neighborhoods","subtitle":"Sequential Analysis of Neighborhood Change","author":"The very famous Dr. Elizabeth Delmelle","theme":"simple","chalkboard":true,"slideNumber":true,"previewLinks":"auto"}}},"projectFormats":["html"]}